<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Available Golf Courses</title>
    <meta 
      name="description" 
      content="Browse golf courses and start your round at Morro Bay, Paso Robles, or Hunter Ranch. View course details, ratings, and scorecards." />
    <link 
      rel="preconnect" 
      href="https://fonts.googleapis.com" />
    <link 
      rel="preconnect" 
      href="https://fonts.gstatic.com" 
      crossorigin />
    <link 
      href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@700&family=Roboto:ital,wght@0,400;0,700;1,400&display=swap" 
      rel="stylesheet" />
    <link rel="stylesheet" href="/styles/reset.css" />
    <link rel="stylesheet" href="/styles/tokens.css" />
    <link rel="stylesheet" href="/styles/pages.css" />
    <script type="module">      
      import { define } from "@calpoly/mustang";
      import { GolfCourseElement } from "/src/golf-course.ts";
      import { CourseListElement } from "/src/course-list.ts";

      define({
        "golf-course": GolfCourseElement,
        "course-list": CourseListElement
      });      
    </script>
  </head>
  <body>
    <header class="page-header">
      <h1>
        <svg class="icon">
          <use href="/icons/golf.svg#icon-golf-flag" />
        </svg>
        Golf Buddy
      </h1>
      <nav class="main-nav">
        <a href="clubs.html" class="nav-link">My Clubs & Yardages</a>
        <a href="statistics.html" class="nav-link">My Golf Statistics</a>
        <label id="dark-mode-toggle">
          <input type="checkbox" autocomplete="off" />
          Dark mode
        </label>
      </nav>
    </header>
    <div class="page-grid">
      <course-list src="/data/courses.json"></course-list>
    </div>
    <script>
      function relayEvent(event, newType, newDetail) {
        event.stopPropagation();

        const customEvent = new CustomEvent(newType, {
          bubbles: true,
          detail: newDetail
        });

        event.target.dispatchEvent(customEvent);
      }

      const darkModeLabel = document.getElementById('dark-mode-toggle');

      darkModeLabel.onchange = function(event) {
        if (event.target.type === 'checkbox') {
          relayEvent(event, 'darkmode:toggle', {
            checked: event.target.checked
          });
        }
      };

      document.body.addEventListener('darkmode:toggle', function(event) {
        if (event.detail.checked) {
          event.currentTarget.classList.add('dark-mode');
        } else {
          event.currentTarget.classList.remove('dark-mode');
        }
      });
    </script>
  </body>
</html>